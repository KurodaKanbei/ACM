%!TEX program = xelatex
\documentclass[landscape, oneside, a4paper, cs4size]{book}

\def\marginset#1#2{                      % 页边设置 \marginset{left}{top}
\setlength{\oddsidemargin}{#1}         % 左边（书内侧）装订预留空白距离
\iffalse                   % 如果考虑左侧（书内侧）的边注区则改为\iftrue
\reversemarginpar
\addtolength{\oddsidemargin}{\marginparsep}
\addtolength{\oddsidemargin}{\marginparwidth}
\fi
\setlength{\evensidemargin}{0mm}       % 置0
\iffalse                   % 如果考虑右侧（书外侧）的边注区则改为\iftrue
\addtolength{\evensidemargin}{\marginparsep}
\addtolength{\evensidemargin}{\marginparwidth}
\fi
% \paperwidth = h + \oddsidemargin+\textwidth+\evensidemargin + h
\setlength{\hoffset}{\paperwidth}
\addtolength{\hoffset}{-\oddsidemargin}
\addtolength{\hoffset}{-\textwidth}
\addtolength{\hoffset}{-\evensidemargin}
\setlength{\hoffset}{0.5\hoffset}
\addtolength{\hoffset}{-1in}           % h = \hoffset + 1in
%\setlength{\voffset}{-1in}             % 0 = \voffset + 1in
\setlength{\topmargin}{\paperheight}
\addtolength{\topmargin}{-\headheight}
\addtolength{\topmargin}{-\headsep}
\addtolength{\topmargin}{-\textheight}
\addtolength{\topmargin}{-\footskip}
\addtolength{\topmargin}{#2}           % 上边预留装订空白距离
\setlength{\topmargin}{0.5\topmargin}
}
% 调整页边空白使内容居中，两参数分别为纸的左边和上边预留装订空白距离
\marginset{125mm}{200mm}


%\usepackage{ctex}
\usepackage{bm}
%\usepackage[fleqn]{amsmath}
\usepackage{harpoon}
\usepackage{fontspec}
\usepackage{listings}
\usepackage[left=1cm,right=1cm,top=1cm,bottom=1cm,columnsep=1cm,dvipdfm]{geometry}
\usepackage{setspace}
\usepackage{bm}
\usepackage{cmap}
\usepackage{cite}
\usepackage{float}
\usepackage{xeCJK}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{setspace}
\usepackage{enumerate}
\usepackage{indentfirst}
\usepackage{adjmulticol}
\usepackage{titlesec}
\usepackage{color,minted}
\usepackage{xeCJK}
\allowdisplaybreaks
%\setlength{\parindent}{0em}
%\setlength{\mathindent}{0pt}
\lstset{breaklines}
\let\cleardoublepage\relax
\titleformat{\chapter}{\normalfont\large\bfseries}{Chapter \,\thechapter}{10pt}{\large}
\titleformat{\section}{\normalfont\normalsize\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\small\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\footnotesize\bfseries}{\thesubsubsection}{1em}{}
\titlespacing*{\chapter} {0pt}{0pt}{0pt}
\titlespacing*{\section} {0pt}{0pt}{0pt}
\titlespacing*{\subsection} {0pt}{-1pt}{-1pt}
\titlespacing*{\subsubsection}{0pt}{-1pt}{-1pt}
%configure fonts
\setmonofont{Menlo}[Scale=0.8]
\setCJKmainfont{STHeiti}
\usepackage{yfonts}

\renewcommand{\theFancyVerbLine}{\sffamily \textcolor[rgb]{0.5,0.5,0.5}{\scriptsize {\arabic{FancyVerbLine}}}}

\setminted[cpp]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.5,
	tabsize=4,
	fontsize=\small,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
}
\setminted[java]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=1.0,
	tabsize=4,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
}
\setminted[text]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=1.0,
	tabsize=4,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
}
\begin{document}\scriptsize
	\renewcommand{\thefootnote}{\fnsymbol{footnote}}
	\title{\Huge{\textgoth{Gungnir's Standard Code Library}}\thanks{https://github.com/footoredo/Gungnir}}
	\author{\emph{Shanghai Jiao Tong University}}
	\date{Dated: \today}
	\maketitle
	\clearpage
	\begin{multicols}{2}
		\tableofcontents
		\clearpage
		\begin{spacing}{0.8}
			\input{../source.tex}
		\end{spacing}
	\end{multicols}
\end{document}
